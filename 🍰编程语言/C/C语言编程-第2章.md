---
title: C语言编程-C中对内存的存储方式
date: 2018-09-09 03:55:13
categories: C语言编程
toc: true
comments: true
---
<h3></h3>

# 第二章-C中对内存的存储方式

如果是基本数据类型，比如int那么内存就会分配4个字节取存储。那么数组是怎么样的呢？

数组，是一次申请多个空间，比如int a[5]，那么内存会分配4&#42;5个字节去存储，而这个内存是线性的，意思就是说每个数的首地址+一个类型就是等于下一个数的首地址,我们说一个数的地址，说的是这个数的首地址，比如

```
int a[2] = {3, 4}
12
0000 0000 0000 0011    0000 0000 0000 0100
首地址                  首地址
```

注意的重点是：数组的内容的地址是连续的,即数组的地址是连续的。既然知道内存是线性的，下面就说一下地址加1的意义。



### C语言数组中的a, &a, &a[0]的区别和地址加1的意义

那时候我学C的时候问题没有那么多，现在重新学习反而对这些很有兴趣。C语言数组中的a, &amp;a, &amp;a[0]是不是傻傻分不清楚？地址的加法又是怎么回事？
其实也没有那么难，一维数组的地址加1其实加上<strong>一个类型</strong>的大小，并不是普通的加1。你要明白我们说的数组的地址是首元素的首地址。

<strong>而数组名a是一个常量，首元素的地址。&amp;a是数组的地址，相当于小区。&amp;a[0]是首元素的首地址，相当于住户，单个元素的地址</strong>
<strong>Q：&amp;a和&amp;a[0]的区别？</strong>
<strong>A:</strong>
1.小区地址与具体用户的地址
2.&amp;a+1加上一个类型(整个数组)的大小，<strong>一个小区的下一个，是下一个小区</strong>
3.&amp;a[1]+1加上一个类型(一个元素)的大小，<strong>住户的下一个，是下一户。</strong>

数组名的意义：首元素的地址
            a = = &amp;a[0];



下面是我学习的笔记，感兴趣的可以看看

```c
#include <stdio.h>
#include <stdlib.h>

//int main(void)
//{
    // 数组， 一次申请多个空间，数据的集合。 内存都是线性的
    //int a[5]; // 数组声明
    // 字母，下划线，数字，首位不能是数字
    //int a[5] = {1, 2, 3, 4, 5 };// 数组声明和初始化
    //int a[5] = { 1, 2 };// 数组声明和初始化，初始化部分元素，其他默认位0
    //int b[5] = {0};
    //int c[] = { 1, 2, 3 }; //不指定个数，但是这样就一定要初始化

    // 给数组赋值 
    // 越界
    // 数组名是个常量

    //int a[3] = { 1, 2, 3 };
    //printf("%d, %d, %d\n", a[0], a[1], a[2]);
    //printf("%p\n%p\n%p\n", &amp;a[0], &amp;a[1], &amp;a[2]);

    //printf("\n");
    //// 地址偏移
    //printf("%p\n%p\n%p\n", &amp;a[0], &amp;a[0]+1, &amp;a[0]+2); // 通过a[0]的地址得到a[1]， 地址+1：其实是地址加上类型的大小，不是普通的加。
    //printf("\n");
    //// 地址+1：其实是地址加上类型的大小，不是普通的加。
    //printf("%p\n%p\n%p\n", a, &amp;a, &amp;a + 1); 
    /*
        &amp;a是数组的地址。
        &amp;a[0]是首元素的首地址，单个元素的地址
        &amp;a和&amp;a[0]的区别：
            小区地址与具体用户的地址
            &amp;a+1加上一个类型(整个数组)的大小，一个小区的下一个，是下一个小区
            &amp;a[1]+1加上一个类型(一个元素)的大小，住户的下一个，是下一户。

        数组名的意义：首元素的地址
            a = = &amp;a[0];
     */
     // 结果
         //1, 2, 3
         //012FFA1C  &amp;a[0]
         //012FFA20  &amp;a[1]
         //012FFA24  &amp;a[2]

         //012FFA1C  &amp;a[0]
         //012FFA20  &amp;a[0]+1 加的是一个元素的大小
         //012FFA24  &amp;a[0]+2

         //012FFA1C  a 小区
         //012FFA1C  &amp;a 一个小区
         //012FFA28  &amp;a+1 下一个小区，加的是整个数组的大小

    //int a[2][2] = { {1,2},{3,4} };
    //printf("%p\n%p\n%p\n%p\n", &amp;a, &amp;a[0], &amp;a[0]+1, &amp;a[1]);
    //printf("\n");
    //printf("%p\n%p\n%p\n", a, &amp;a, &amp;a+1);
    //printf("\n");
    //printf("%p\n%p\n", &amp;a[0][0], &amp;a[0][1]);

    // &amp;a[0] === a
    // 结果
        //00EFF794  &amp;a
        //00EFF794  &amp;a[0]
        //00EFF79C
        //00EFF79C  &amp;a[1]

        //00EFF794  a
        //00EFF794  &amp;a
        //00EFF7A4

        //00EFF794  &amp;a[0][0]
        //00EFF798  

//  system("pause");
//  return 0;
//}
```

从结果来看，我们就和很好的明白了数组中地址加1的意义。

下图是我看C3程序员的教程截取的图，如有冒犯立删。从图中对二维数组的描述，我们就能更好的理解这个地址加1的意义了。
<img src="images/pro07-数组的地址png.png" alt="" />