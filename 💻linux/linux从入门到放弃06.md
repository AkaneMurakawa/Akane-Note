---
title: linux从入门到放弃——06解压缩原理与使用
date: 2017-8-25 23:53:43
categories: Linux
comments: true
---

# linux从入门到放弃——06解压缩原理与使用

在我们用qq的时候就会意识到一点，我们的文件只有压缩之后才能使用。之前我有一个同学曾经问我，为什么我的文件传不了啊，我看了一下。他想传过去的东西是一个文件夹，而qq传输是不能这样的，只能传压缩文件或者文件。这个时候我突然在想，为什么不能直接以文件夹的形式传输过去。文件夹不是文件，它没有文件信息。而是一个存放文件的东西。可是当我们把文件夹压缩成一个压缩包之后，它就变成一个文件了，有了文件的特性，可以正常发送。 所以，想要发送文件夹，先把它打包。这跟我们生活中也是一个道理，我们一堆东西如果要带走，首先就用东西把他绑起来。而在linux中这个绑的东西就叫tar,使用tar程序打出来的包我们称为tar包。tar包文件的命令通常都是以.tar结尾的。**生成tar包后，就可以用其他的程序进行压缩。**

下面来说一下tar这个命令的几个参数：
```
-c: 压缩
-x：解压
-t：查看内容
注意：上面三个参数同时只能有一个，你不可能说压缩的同时还能解压吧。
-r：向压缩归档文件末尾追加文件
-u：更新原压缩包中的文件
-v：显示所有过程
-O：将文件解开到标准输出
-f: 切记，这个参数是最后一个参数，后面只能接档案名。
```
在linux中现在主要分几种解压缩方式：\*.Z(compress，这是很久以前在unix上用的了)，\*.gzip，\*.bz2(bzip2)，\*.xz(xz)。就是有点类似于我们windows上的zip，rar，7z。
所以在用tar命令的时候会结合解压缩的方式选择不同的命令。
```
-z：gzip
-j：bz2
-J: xz
-Z：compress
```
其实这个命令很多，那我们要不要记呢，不用，用命令"man tar"就可以查询手册，而且我们可能用的参数也不多，就是基本的解压缩。那我们光说不行得来试一下。
```
压缩：
tar [option] 生成的压缩包名字 文件
tar -zcvf test.tar.gz test.txt
tar -jcvf test.tar.bz2 test.txt
tar -Jcvf test.tar.xz test.txt

解压：
tar [option] 压缩文件名字
tar -zcvf test.tar.gz 
tar -jcvf test.tar.bz2 
tar -Jcvf test.tar.xz 
要是想打包一堆的话，就需要用到通配符了。比如*.jpg,就是说所有.jpg结尾的。

```
我们如果想要zip或者rar这种方式解压缩就得去下载相应的软件了。在这里的压缩效率，理论上来说，xz>bz2>gzip。这个你用哪个都可以，为什么理论上来说呢，首先不同文件可能是不同的，因为压缩是有一个前提就是可以前提，比如一个文件你压缩成百分之十，那如果还可以压缩，又压缩百分之十，这样最后都没有了，这是不可能的事情。事实上，压缩的原理就是把一些重复的通过一个字符表示，比如100000000，这里是1亿，这样就很浪费资源了，用10^8其实表示的是同一个。这个压缩其实是有一个公式：
![](images/linux/yasuo.png)
然后解压缩其实讲到这里就差不多，其他的无非就是参数了。下面列一些我从网上找来的，因为网上的教程很多都比我的好，如果我再详细说每一个参数就不够时间了。我这里就是说一下解压缩的原理和使用，知道了这些你就能够知道怎么去使用,遇到不会的时候怎么查了，但是如果你要自己做一个解压缩软件，这里面还有很多算法知识。

## 总结 
1、\*.tar 用 tar –xvf 解压 
2、\*.gz 用 gzip -d或者gunzip 解压 
3、\*.tar.gz和\*.tgz 用 tar –xzf 解压 
4、\*.bz2 用 bzip2 -d或者用bunzip2 解压 
5、\*.tar.bz2用tar –xjf 解压 
6、\*.Z 用 uncompress 解压 
7、\*.tar.Z 用tar –xZf 解压 
8、\*.rar 用 unrar e解压 
9、\*.zip 用 unzip 解压

## 范例：

zip命令可以用来将文件压缩成为常用的zip格式。unzip命令则用来解压缩zip文件。

1. 我想把一个文件abc.txt和一个目录dir1压缩成为yasuo.zip：
```
zip -r yasuo.zip abc.txt dir1
```
2.我下载了一个yasuo.zip文件，想解压缩：
```
unzip yasuo.zip
```
3.我当前目录下有abc1.zip，abc2.zip和abc3.zip，我想一起解压缩它们：
```
unzip abc\?.zip
```
注释：?表示一个字符，如果用*表示任意多个字符。

4.我有一个很大的压缩文件large.zip，我不想解压缩，只想看看它里面有什么：
```
unzip -v large.zip
```
5.我下载了一个压缩文件large.zip，想验证一下这个压缩文件是否下载完全了
```
unzip -t large.zip
```
6.我用-v选项发现music.zip压缩文件里面有很多目录和子目录，并且子目录中其实都是歌曲mp3文件，我想把这些文件都下载到第一级目录，而不是一层一层建目录：
```
unzip -j music.zip
```

## tar命令
格式：tar [主选项+辅选项] 文件或目录
主选项：它们不可能同时出现，告诉tar要做什么事，是必须要有的
-c：创建新的压缩文件，相当与打包
-x：从压缩文件中释放文件，相当于拆包
-t：列出压缩文件中的内容
辅选项：可选
-C：切换到指定目录
-z：是否同时具有gzip的属性？亦即是否需要用gzip压缩或解压？一般格式为tar.gz或xx.tgz
-j：是否同时具有bzip2的属性？亦即是否需要用bzip2压缩或解压？一般格式为tar.bz2
-v：压缩过程中显示文件
-f：指定压缩文件，注意，在f之后要立即接档名（自己取的），不要再加其他参数
-p：使用原文件的原来属性
-exclude FILE：在压缩过程中，不要将FILE打包

可以参考这篇文章[Linux下文件的压缩与解压缩](https://www.biaodianfu.com/linux-yasuo.html)

补充：今天是2018/4/9，离这篇文章已经过了很久了。回头看的时候，我感觉这写的并不好。没有好好记录我学习linux的一个心得过程。说实话，要写这个东西挺多的根本写不完，我也没有那么多精力。都是用到什么就去查，只要懂得linux的设计思想，遇到什么你都可以随便去查自己去解决。这里介绍的都是基本的思想，比如linux的目录，软件安装，vim的基本使用，shell命令，这些我们肯定是记不住的，但是要学会怎么查。因为现在也开设了一门unix的课程，所以又是想到什么写什么。大部分是写的我能够看的懂，其次是有精力写就通俗一点给初学者看。
